<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>pion-net: net/include/pion/net/HTTPMessage.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>net/include/pion/net/HTTPMessage.hpp</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// ------------------------------------------------------------------</span>
<a name="l00002"></a>00002 <span class="comment">// pion-net: a C++ framework for building lightweight HTTP interfaces</span>
<a name="l00003"></a>00003 <span class="comment">// ------------------------------------------------------------------</span>
<a name="l00004"></a>00004 <span class="comment">// Copyright (C) 2007-2008 Atomic Labs, Inc.  (http://www.atomiclabs.com)</span>
<a name="l00005"></a>00005 <span class="comment">//</span>
<a name="l00006"></a>00006 <span class="comment">// Distributed under the Boost Software License, Version 1.0.</span>
<a name="l00007"></a>00007 <span class="comment">// See http://www.boost.org/LICENSE_1_0.txt</span>
<a name="l00008"></a>00008 <span class="comment">//</span>
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <span class="preprocessor">#ifndef __PION_HTTPMESSAGE_HEADER__</span>
<a name="l00011"></a>00011 <span class="preprocessor"></span><span class="preprocessor">#define __PION_HTTPMESSAGE_HEADER__</span>
<a name="l00012"></a>00012 <span class="preprocessor"></span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;boost/cstdint.hpp&gt;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;boost/asio.hpp&gt;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &lt;boost/scoped_array.hpp&gt;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &lt;boost/lexical_cast.hpp&gt;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &lt;boost/algorithm/string/trim.hpp&gt;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &lt;boost/regex.hpp&gt;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;pion/PionConfig.hpp&gt;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;pion/net/HTTPTypes.hpp&gt;</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="keyword">namespace </span>pion {    <span class="comment">// begin namespace pion</span>
<a name="l00025"></a>00025 <span class="keyword">namespace </span>net {     <span class="comment">// begin namespace net (Pion Network Library)</span>
<a name="l00026"></a>00026 
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="comment">// forward declaration for class used by send() and receive()</span>
<a name="l00029"></a>00029 <span class="keyword">class </span>TCPConnection;
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 
<a name="l00035"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html">00035</a> <span class="keyword">class </span>PION_NET_API HTTPMessage
<a name="l00036"></a>00036     : <span class="keyword">public</span> <a class="code" href="structpion_1_1net_1_1_h_t_t_p_types.html">HTTPTypes</a>
<a name="l00037"></a>00037 {
<a name="l00038"></a>00038 <span class="keyword">public</span>:
<a name="l00039"></a>00039 
<a name="l00041"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#f5c0864ef7e05dbab79ae4f37de123b2">00041</a>     <span class="keyword">typedef</span> std::vector&lt;boost::asio::const_buffer&gt;  <a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#f5c0864ef7e05dbab79ae4f37de123b2">WriteBuffers</a>;
<a name="l00042"></a>00042 
<a name="l00044"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#3f51e42afcccf433e7992b55b9797d13">00044</a>     <span class="keyword">typedef</span> std::vector&lt;char&gt;   <a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#3f51e42afcccf433e7992b55b9797d13">ChunkCache</a>;
<a name="l00045"></a>00045 
<a name="l00047"></a><a class="code" href="structpion_1_1net_1_1_h_t_t_p_message_1_1_receive_error.html">00047</a>     <span class="keyword">struct </span><a class="code" href="structpion_1_1net_1_1_h_t_t_p_message_1_1_receive_error.html">ReceiveError</a>
<a name="l00048"></a>00048         : <span class="keyword">public</span> boost::system::error_category
<a name="l00049"></a>00049     {
<a name="l00050"></a><a class="code" href="structpion_1_1net_1_1_h_t_t_p_message_1_1_receive_error.html#677eda9b1ce8532c410ac85a222cd876">00050</a>         <span class="keyword">virtual</span> ~<a class="code" href="structpion_1_1net_1_1_h_t_t_p_message_1_1_receive_error.html">ReceiveError</a>() {}
<a name="l00051"></a><a class="code" href="structpion_1_1net_1_1_h_t_t_p_message_1_1_receive_error.html#07c4e222877d460eb4f7bf877a94b515">00051</a>         <span class="keyword">virtual</span> <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *name()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="stringliteral">"ReceiveError"</span>; }
<a name="l00052"></a><a class="code" href="structpion_1_1net_1_1_h_t_t_p_message_1_1_receive_error.html#95d65408f4705614a7e6546bc6dfbdeb">00052</a>         <span class="keyword">virtual</span> <span class="keyword">inline</span> std::string message(<span class="keywordtype">int</span> ev)<span class="keyword"> const </span>{
<a name="l00053"></a>00053             std::string result;
<a name="l00054"></a>00054             <span class="keywordflow">switch</span>(ev) {
<a name="l00055"></a>00055                 <span class="keywordflow">case</span> 1:
<a name="l00056"></a>00056                     result = <span class="stringliteral">"HTTP message parsing error"</span>;
<a name="l00057"></a>00057                     <span class="keywordflow">break</span>;
<a name="l00058"></a>00058                 <span class="keywordflow">default</span>:
<a name="l00059"></a>00059                     result = <span class="stringliteral">"Unknown receive error"</span>;
<a name="l00060"></a>00060                     <span class="keywordflow">break</span>;
<a name="l00061"></a>00061             }
<a name="l00062"></a>00062             <span class="keywordflow">return</span> result;
<a name="l00063"></a>00063         }
<a name="l00064"></a>00064     };
<a name="l00065"></a>00065 
<a name="l00067"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#bea948e6ee65e2d477356d825ad005fa">00067</a>     <span class="keyword">enum</span> <a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#bea948e6ee65e2d477356d825ad005fa">DataStatus</a>
<a name="l00068"></a>00068     {
<a name="l00069"></a>00069         STATUS_NONE,        <span class="comment">// no data received (i.e. all lost)</span>
<a name="l00070"></a>00070         STATUS_TRUNCATED,   <span class="comment">// one or more missing packets at the end </span>
<a name="l00071"></a>00071         STATUS_PARTIAL,     <span class="comment">// one or more missing packets but NOT at the end </span>
<a name="l00072"></a>00072         STATUS_OK           <span class="comment">// no missing packets</span>
<a name="l00073"></a>00073     };
<a name="l00074"></a>00074 
<a name="l00076"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#7f734b38956a0efb3560a9541e9631d1">00076</a>     HTTPMessage(<span class="keywordtype">void</span>)
<a name="l00077"></a>00077         : m_is_valid(false), m_is_chunked(false), m_chunks_supported(false),
<a name="l00078"></a>00078         m_do_not_send_content_length(false),
<a name="l00079"></a>00079         m_version_major(1), m_version_minor(1), m_content_length(0),
<a name="l00080"></a>00080         m_status(STATUS_NONE), m_has_missing_packets(false), m_has_data_after_missing(false)
<a name="l00081"></a>00081     {}
<a name="l00082"></a>00082 
<a name="l00084"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#592e9b615389da6dc29ce2e035be7d7b">00084</a>     HTTPMessage(<span class="keyword">const</span> HTTPMessage&amp; http_msg)
<a name="l00085"></a>00085         : m_first_line(http_msg.m_first_line),
<a name="l00086"></a>00086         m_is_valid(http_msg.m_is_valid),
<a name="l00087"></a>00087         m_is_chunked(http_msg.m_is_chunked),
<a name="l00088"></a>00088         m_chunks_supported(http_msg.m_chunks_supported),
<a name="l00089"></a>00089         m_do_not_send_content_length(http_msg.m_do_not_send_content_length),
<a name="l00090"></a>00090         m_remote_ip(http_msg.m_remote_ip),
<a name="l00091"></a>00091         m_version_major(http_msg.m_version_major),
<a name="l00092"></a>00092         m_version_minor(http_msg.m_version_minor),
<a name="l00093"></a>00093         m_content_length(http_msg.m_content_length),
<a name="l00094"></a>00094         m_chunk_cache(http_msg.m_chunk_cache),
<a name="l00095"></a>00095         m_headers(http_msg.m_headers),
<a name="l00096"></a>00096         m_status(http_msg.m_status),
<a name="l00097"></a>00097         m_has_missing_packets(http_msg.m_has_missing_packets),
<a name="l00098"></a>00098         m_has_data_after_missing(http_msg.m_has_data_after_missing)
<a name="l00099"></a>00099     {
<a name="l00100"></a>00100         <span class="keywordflow">if</span> (http_msg.<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#11f79273da1b1352b30825c89c075d70">m_content_buf</a>) {
<a name="l00101"></a>00101             <span class="keywordtype">char</span> *ptr = createContentBuffer();
<a name="l00102"></a>00102             memcpy(ptr, http_msg.<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#11f79273da1b1352b30825c89c075d70">m_content_buf</a>.get(), m_content_length);
<a name="l00103"></a>00103         }
<a name="l00104"></a>00104     }
<a name="l00105"></a>00105 
<a name="l00107"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#5490b69f84242172dc2eb3618199aa79">00107</a>     <span class="keyword">inline</span> HTTPMessage&amp; operator=(<span class="keyword">const</span> HTTPMessage&amp; http_msg) {
<a name="l00108"></a>00108         m_first_line = http_msg.<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#0e65511480a8f3c82dd0311912f7b7a4">m_first_line</a>;
<a name="l00109"></a>00109         m_is_valid = http_msg.<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#8ead7518ac387aec73eda10115ae5a81">m_is_valid</a>;
<a name="l00110"></a>00110         m_is_chunked = http_msg.<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#171b0de9d1e3ca51e6e4d71189ba7989">m_is_chunked</a>;
<a name="l00111"></a>00111         m_chunks_supported = http_msg.<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#993389d43183b9b42bbbbc28c542bd77">m_chunks_supported</a>;
<a name="l00112"></a>00112         m_do_not_send_content_length = http_msg.<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#e66faaddfa6b7d65599b5e11e27c711b">m_do_not_send_content_length</a>;
<a name="l00113"></a>00113         m_remote_ip = http_msg.<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#851d6adc0c59630031549ae920f73425">m_remote_ip</a>;
<a name="l00114"></a>00114         m_version_major = http_msg.<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#68b07c341595c36ffd0cb97c8ef0b0cd">m_version_major</a>;
<a name="l00115"></a>00115         m_version_minor = http_msg.<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#998f489455e5f98a9a2d5951e912f5ec">m_version_minor</a>;
<a name="l00116"></a>00116         m_content_length = http_msg.<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#97279639f6f361ede9f570ab01e55861">m_content_length</a>;
<a name="l00117"></a>00117         m_chunk_cache = http_msg.<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#7c118efccbc2248e674cb80ef7364d46">m_chunk_cache</a>;
<a name="l00118"></a>00118         m_headers = http_msg.<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#7b3513ff83a1335bb6cb7306ffadfe97">m_headers</a>;
<a name="l00119"></a>00119         m_status = http_msg.<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#ae9228d741b2c8a6c608cd70528cd069">m_status</a>;
<a name="l00120"></a>00120         m_has_missing_packets = http_msg.<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#f94e67657cd1382b4ad11556b2471afe">m_has_missing_packets</a>;
<a name="l00121"></a>00121         m_has_data_after_missing = http_msg.<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#4633fc3cc6ecc1f5302f6dc3fa915483">m_has_data_after_missing</a>;
<a name="l00122"></a>00122         <span class="keywordflow">if</span> (http_msg.<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#11f79273da1b1352b30825c89c075d70">m_content_buf</a>) {
<a name="l00123"></a>00123             <span class="keywordtype">char</span> *ptr = createContentBuffer();
<a name="l00124"></a>00124             memcpy(ptr, http_msg.<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#11f79273da1b1352b30825c89c075d70">m_content_buf</a>.get(), m_content_length);
<a name="l00125"></a>00125         }
<a name="l00126"></a>00126         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00127"></a>00127     }
<a name="l00128"></a>00128 
<a name="l00130"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#866ca9db793d2d190ab52f916e5fcbbf">00130</a>     <span class="keyword">virtual</span> ~HTTPMessage() {}
<a name="l00131"></a>00131 
<a name="l00133"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#8c236c758e10f12f9f5fe1f87c3359d6">00133</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> clear(<span class="keywordtype">void</span>) {
<a name="l00134"></a>00134         clearFirstLine();
<a name="l00135"></a>00135         m_is_valid = m_is_chunked = m_chunks_supported
<a name="l00136"></a>00136             = m_do_not_send_content_length = <span class="keyword">false</span>;
<a name="l00137"></a>00137         m_remote_ip = boost::asio::ip::address_v4(0);
<a name="l00138"></a>00138         m_version_major = m_version_minor = 1;
<a name="l00139"></a>00139         m_content_length = 0;
<a name="l00140"></a>00140         m_content_buf.reset();
<a name="l00141"></a>00141         m_chunk_cache.clear();
<a name="l00142"></a>00142         m_headers.clear();
<a name="l00143"></a>00143         m_cookie_params.clear();
<a name="l00144"></a>00144         m_status = STATUS_NONE;
<a name="l00145"></a>00145         m_has_missing_packets = <span class="keyword">false</span>;
<a name="l00146"></a>00146         m_has_data_after_missing = <span class="keyword">false</span>;
<a name="l00147"></a>00147     }
<a name="l00148"></a>00148 
<a name="l00150"></a>00150     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> isContentLengthImplied(<span class="keywordtype">void</span>) <span class="keyword">const </span>= 0;
<a name="l00151"></a>00151 
<a name="l00153"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#7a56ec5899a162678cc375a59d947162">00153</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> isValid(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_is_valid; }
<a name="l00154"></a>00154 
<a name="l00156"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#b28b7bf5c5cc38e7090be894b499a80c">00156</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> getChunksSupported(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_chunks_supported; }
<a name="l00157"></a>00157 
<a name="l00159"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#50c4b35c37c3a8765b8f23e2bf8f6de5">00159</a>     <span class="keyword">inline</span> boost::asio::ip::address&amp; getRemoteIp(<span class="keywordtype">void</span>) {
<a name="l00160"></a>00160         <span class="keywordflow">return</span> m_remote_ip;
<a name="l00161"></a>00161     }
<a name="l00162"></a>00162 
<a name="l00164"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#e9b018fd061bede8e96cd5a37f7fa025">00164</a>     <span class="keyword">inline</span> boost::uint16_t getVersionMajor(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_version_major; }
<a name="l00165"></a>00165 
<a name="l00167"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#35b76de7f81cb2c5412b5aafea9bd6f6">00167</a>     <span class="keyword">inline</span> boost::uint16_t getVersionMinor(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_version_minor; }
<a name="l00168"></a>00168 
<a name="l00170"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#6c1f5fa161708ac38e81fd7d98c3791f">00170</a>     <span class="keyword">inline</span> std::string getVersionString(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{
<a name="l00171"></a>00171         std::string http_version(STRING_HTTP_VERSION);
<a name="l00172"></a>00172         http_version += boost::lexical_cast&lt;std::string&gt;(getVersionMajor());
<a name="l00173"></a>00173         http_version += <span class="charliteral">'.'</span>;
<a name="l00174"></a>00174         http_version += boost::lexical_cast&lt;std::string&gt;(getVersionMinor());
<a name="l00175"></a>00175         <span class="keywordflow">return</span> http_version;
<a name="l00176"></a>00176     }
<a name="l00177"></a>00177 
<a name="l00179"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#9945ec749774b4022fdf0c1cefcd5719">00179</a>     <span class="keyword">inline</span> std::size_t getContentLength(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_content_length; }
<a name="l00180"></a>00180 
<a name="l00182"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#2b4525b3120e32612b6be590c4bf3119">00182</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> isChunked(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_is_chunked; }
<a name="l00183"></a>00183 
<a name="l00185"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#e64f08099223d5384b271e82423db42f">00185</a>     <span class="keyword">inline</span> <span class="keywordtype">char</span> *getContent(<span class="keywordtype">void</span>) { <span class="keywordflow">return</span> m_content_buf.get(); }
<a name="l00186"></a>00186 
<a name="l00188"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#3f1559293298215c517c54ce3b3c654e">00188</a>     <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *getContent(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_content_buf.get(); }
<a name="l00189"></a>00189 
<a name="l00191"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#35840b4265d96f46047477e00c001559">00191</a>     <span class="keyword">inline</span> <a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#3f51e42afcccf433e7992b55b9797d13">ChunkCache</a>&amp; getChunkCache(<span class="keywordtype">void</span>) { <span class="keywordflow">return</span> m_chunk_cache; }
<a name="l00192"></a>00192 
<a name="l00194"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#5a88c89a92133521dd80d2f385ec7218">00194</a>     <span class="keyword">inline</span> <span class="keyword">const</span> std::string&amp; getHeader(<span class="keyword">const</span> std::string&amp; key)<span class="keyword"> const </span>{
<a name="l00195"></a>00195         <span class="keywordflow">return</span> getValue(m_headers, key);
<a name="l00196"></a>00196     }
<a name="l00197"></a>00197 
<a name="l00199"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#5d9e7f8244aa0b2c96790bc0c56dd55b">00199</a>     <span class="keyword">inline</span> Headers&amp; getHeaders(<span class="keywordtype">void</span>) {
<a name="l00200"></a>00200         <span class="keywordflow">return</span> m_headers;
<a name="l00201"></a>00201     }
<a name="l00202"></a>00202 
<a name="l00204"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#4b534907f8e97cbdbef2076d6e295026">00204</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> hasHeader(<span class="keyword">const</span> std::string&amp; key)<span class="keyword"> const </span>{
<a name="l00205"></a>00205         <span class="keywordflow">return</span>(m_headers.find(key) != m_headers.end());
<a name="l00206"></a>00206     }
<a name="l00207"></a>00207 
<a name="l00210"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#228144ce8134496b05e9443095f5fc4f">00210</a>     <span class="keyword">inline</span> <span class="keyword">const</span> std::string&amp; getCookie(<span class="keyword">const</span> std::string&amp; key)<span class="keyword"> const </span>{
<a name="l00211"></a>00211         <span class="keywordflow">return</span> getValue(m_cookie_params, key);
<a name="l00212"></a>00212     }
<a name="l00213"></a>00213     
<a name="l00215"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#9bfb1686238166b48984e3785f4c1cce">00215</a>     <span class="keyword">inline</span> CookieParams&amp; getCookieParams(<span class="keywordtype">void</span>) {
<a name="l00216"></a>00216         <span class="keywordflow">return</span> m_cookie_params;
<a name="l00217"></a>00217     }
<a name="l00218"></a>00218 
<a name="l00221"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#9d6dfeb307706b38976106b64eb9504c">00221</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> hasCookie(<span class="keyword">const</span> std::string&amp; key)<span class="keyword"> const </span>{
<a name="l00222"></a>00222         <span class="keywordflow">return</span>(m_cookie_params.find(key) != m_cookie_params.end());
<a name="l00223"></a>00223     }
<a name="l00224"></a>00224     
<a name="l00227"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#bfc52c64606c0ef3481c1a09b88ab762">00227</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> addCookie(<span class="keyword">const</span> std::string&amp; key, <span class="keyword">const</span> std::string&amp; value) {
<a name="l00228"></a>00228         m_cookie_params.insert(std::make_pair(key, value));
<a name="l00229"></a>00229     }
<a name="l00230"></a>00230 
<a name="l00233"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#8b178018becea6e2d8fd3f6fdf25622d">00233</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> changeCookie(<span class="keyword">const</span> std::string&amp; key, <span class="keyword">const</span> std::string&amp; value) {
<a name="l00234"></a>00234         changeValue(m_cookie_params, key, value);
<a name="l00235"></a>00235     }
<a name="l00236"></a>00236 
<a name="l00239"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#50fe3261e146da99d0c0e46691077beb">00239</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> deleteCookie(<span class="keyword">const</span> std::string&amp; key) {
<a name="l00240"></a>00240         deleteValue(m_cookie_params, key);
<a name="l00241"></a>00241     }
<a name="l00242"></a>00242     
<a name="l00244"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#13d024f187226c02a2dc892a5aaad6d9">00244</a>     <span class="keyword">inline</span> <span class="keyword">const</span> std::string&amp; getFirstLine(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{
<a name="l00245"></a>00245         <span class="keywordflow">if</span> (m_first_line.empty())
<a name="l00246"></a>00246             updateFirstLine();
<a name="l00247"></a>00247         <span class="keywordflow">return</span> m_first_line;
<a name="l00248"></a>00248     }
<a name="l00249"></a>00249 
<a name="l00251"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#3fb111f8dde7b62d216808dec80eccd7">00251</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> hasMissingPackets()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_has_missing_packets; }
<a name="l00252"></a>00252     
<a name="l00254"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#34cb2895f113b5fa2fc9ecf1906092ea">00254</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> setMissingPackets(<span class="keywordtype">bool</span> newVal) { m_has_missing_packets = newVal; }
<a name="l00255"></a>00255 
<a name="l00257"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#883907411031d420ebc60e0ed57cd8b7">00257</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> hasDataAfterMissingPackets()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_has_data_after_missing; }
<a name="l00258"></a>00258 
<a name="l00259"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#2ad81669c9dcad46c1f4622b1914239e">00259</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> setDataAfterMissingPacket(<span class="keywordtype">bool</span> newVal) { m_has_data_after_missing = newVal; }
<a name="l00260"></a>00260 
<a name="l00262"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#8741a9fe76fc1dbddc851bb6f6947493">00262</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> setIsValid(<span class="keywordtype">bool</span> b = <span class="keyword">true</span>) { m_is_valid = b; }
<a name="l00263"></a>00263 
<a name="l00265"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#a5b792616fc5adee5c862cbb546d2285">00265</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> setChunksSupported(<span class="keywordtype">bool</span> b) { m_chunks_supported = b; }
<a name="l00266"></a>00266 
<a name="l00268"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#8ac8c261c35d84765adb913843015cb0">00268</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> setRemoteIp(<span class="keyword">const</span> boost::asio::ip::address&amp; ip) { m_remote_ip = ip; }
<a name="l00269"></a>00269 
<a name="l00271"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#583f3a9b920a06e1eeab292e954bb4bb">00271</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> setVersionMajor(<span class="keyword">const</span> boost::uint16_t n) {
<a name="l00272"></a>00272         m_version_major = n;
<a name="l00273"></a>00273         clearFirstLine();
<a name="l00274"></a>00274     }
<a name="l00275"></a>00275 
<a name="l00277"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#5669c516e76dea00d69023e0ae562f7e">00277</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> setVersionMinor(<span class="keyword">const</span> boost::uint16_t n) {
<a name="l00278"></a>00278         m_version_minor = n;
<a name="l00279"></a>00279         clearFirstLine();
<a name="l00280"></a>00280     }
<a name="l00281"></a>00281 
<a name="l00283"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#225d96b806b0f07a9eda475451bcf9dd">00283</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> setContentLength(<span class="keyword">const</span> std::size_t n) { m_content_length = n; }
<a name="l00284"></a>00284 
<a name="l00286"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#90e3fbc823ebc26131faf5439df98f10">00286</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> setDoNotSendContentLength(<span class="keywordtype">void</span>) { m_do_not_send_content_length = <span class="keyword">true</span>; }
<a name="l00287"></a>00287 
<a name="l00289"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#9d43746b9be2f30a64b853781bf020b0">00289</a>     <span class="keyword">inline</span> <a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#bea948e6ee65e2d477356d825ad005fa">DataStatus</a> getStatus()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_status; }
<a name="l00290"></a>00290 
<a name="l00292"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#7b9ec16a15dcae8adf4a1653b25616d2">00292</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> setStatus(<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#bea948e6ee65e2d477356d825ad005fa">DataStatus</a> newVal) { m_status = newVal; }
<a name="l00293"></a>00293 
<a name="l00295"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#b47b277bba71eb2859f17e1341498a94">00295</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> updateContentLengthUsingHeader(<span class="keywordtype">void</span>) {
<a name="l00296"></a>00296         Headers::const_iterator i = m_headers.find(HEADER_CONTENT_LENGTH);
<a name="l00297"></a>00297         <span class="keywordflow">if</span> (i == m_headers.end()) {
<a name="l00298"></a>00298             m_content_length = 0;
<a name="l00299"></a>00299         } <span class="keywordflow">else</span> {
<a name="l00300"></a>00300             std::string trimmed_length(i-&gt;second);
<a name="l00301"></a>00301             boost::algorithm::trim(trimmed_length);
<a name="l00302"></a>00302             m_content_length = boost::lexical_cast&lt;std::size_t&gt;(trimmed_length);
<a name="l00303"></a>00303         }
<a name="l00304"></a>00304     }
<a name="l00305"></a>00305 
<a name="l00307"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#e708404c10a70207f9c8c3d80a304248">00307</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> updateTransferCodingUsingHeader(<span class="keywordtype">void</span>) {
<a name="l00308"></a>00308         m_is_chunked = <span class="keyword">false</span>;
<a name="l00309"></a>00309         Headers::const_iterator i = m_headers.find(HEADER_TRANSFER_ENCODING);
<a name="l00310"></a>00310         <span class="keywordflow">if</span> (i != m_headers.end()) {
<a name="l00311"></a>00311             <span class="comment">// From RFC 2616, sec 3.6: All transfer-coding values are case-insensitive.</span>
<a name="l00312"></a>00312             m_is_chunked = boost::regex_match(i-&gt;second, REGEX_ICASE_CHUNKED);
<a name="l00313"></a>00313             <span class="comment">// ignoring other possible values for now</span>
<a name="l00314"></a>00314         }
<a name="l00315"></a>00315     }
<a name="l00316"></a>00316 
<a name="l00319"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#c27f2a47b9512984c6d3ed51e67e789d">00319</a>     <span class="keyword">inline</span> <span class="keywordtype">char</span> *createContentBuffer(<span class="keywordtype">void</span>) {
<a name="l00320"></a>00320         m_content_buf.reset(<span class="keyword">new</span> <span class="keywordtype">char</span>[m_content_length + 1]);
<a name="l00321"></a>00321         m_content_buf[m_content_length] = <span class="charliteral">'\0'</span>;
<a name="l00322"></a>00322         <span class="keywordflow">return</span> m_content_buf.get();
<a name="l00323"></a>00323     }
<a name="l00324"></a>00324 
<a name="l00326"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#5b5b5c9e1b8c7284c800df696c75c930">00326</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> setContentType(<span class="keyword">const</span> std::string&amp; type) {
<a name="l00327"></a>00327         changeValue(m_headers, HEADER_CONTENT_TYPE, type);
<a name="l00328"></a>00328     }
<a name="l00329"></a>00329 
<a name="l00331"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#5cd96e8fc190d6d295eff7fd6a05b48a">00331</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> addHeader(<span class="keyword">const</span> std::string&amp; key, <span class="keyword">const</span> std::string&amp; value) {
<a name="l00332"></a>00332         m_headers.insert(std::make_pair(key, value));
<a name="l00333"></a>00333     }
<a name="l00334"></a>00334 
<a name="l00336"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#31533e707895b2daf6c89d0600ba7952">00336</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> changeHeader(<span class="keyword">const</span> std::string&amp; key, <span class="keyword">const</span> std::string&amp; value) {
<a name="l00337"></a>00337         changeValue(m_headers, key, value);
<a name="l00338"></a>00338     }
<a name="l00339"></a>00339 
<a name="l00341"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#c3403d7455a6e796a8a91a7abd88c9f2">00341</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> deleteHeader(<span class="keyword">const</span> std::string&amp; key) {
<a name="l00342"></a>00342         deleteValue(m_headers, key);
<a name="l00343"></a>00343     }
<a name="l00344"></a>00344 
<a name="l00346"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#572f4881331413bece7e57af3de8f433">00346</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> checkKeepAlive(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{
<a name="l00347"></a>00347         <span class="keywordflow">return</span> (getHeader(HEADER_CONNECTION) != <span class="stringliteral">"close"</span>
<a name="l00348"></a>00348                 &amp;&amp; (getVersionMajor() &gt; 1
<a name="l00349"></a>00349                     || (getVersionMajor() &gt;= 1 &amp;&amp; getVersionMinor() &gt;= 1)) );
<a name="l00350"></a>00350     }
<a name="l00351"></a>00351 
<a name="l00359"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#f05ca4245f86a150bea62081f3048124">00359</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> prepareBuffersForSend(<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#f5c0864ef7e05dbab79ae4f37de123b2">WriteBuffers</a>&amp; write_buffers,
<a name="l00360"></a>00360                                       <span class="keyword">const</span> <span class="keywordtype">bool</span> keep_alive,
<a name="l00361"></a>00361                                       <span class="keyword">const</span> <span class="keywordtype">bool</span> using_chunks)
<a name="l00362"></a>00362     {
<a name="l00363"></a>00363         <span class="comment">// update message headers</span>
<a name="l00364"></a>00364         prepareHeadersForSend(keep_alive, using_chunks);
<a name="l00365"></a>00365         <span class="comment">// add first message line</span>
<a name="l00366"></a>00366         write_buffers.push_back(boost::asio::buffer(getFirstLine()));
<a name="l00367"></a>00367         write_buffers.push_back(boost::asio::buffer(STRING_CRLF));
<a name="l00368"></a>00368         <span class="comment">// append HTTP headers</span>
<a name="l00369"></a>00369         appendHeaders(write_buffers);
<a name="l00370"></a>00370     }
<a name="l00371"></a>00371 
<a name="l00372"></a>00372 
<a name="l00379"></a>00379     std::size_t send(<a class="code" href="classpion_1_1net_1_1_t_c_p_connection.html">TCPConnection</a>&amp; tcp_conn, boost::system::error_code&amp; ec);
<a name="l00380"></a>00380 
<a name="l00387"></a>00387     std::size_t receive(<a class="code" href="classpion_1_1net_1_1_t_c_p_connection.html">TCPConnection</a>&amp; tcp_conn, boost::system::error_code&amp; ec);
<a name="l00388"></a>00388 
<a name="l00392"></a>00392     <span class="keywordtype">void</span> concatenateChunks(<span class="keywordtype">void</span>);
<a name="l00393"></a>00393 
<a name="l00394"></a>00394 
<a name="l00395"></a>00395 <span class="keyword">protected</span>:
<a name="l00396"></a>00396 
<a name="l00403"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#45b6ef32a30730fbe8c1afec60d425b5">00403</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> prepareHeadersForSend(<span class="keyword">const</span> <span class="keywordtype">bool</span> keep_alive,
<a name="l00404"></a>00404                                       <span class="keyword">const</span> <span class="keywordtype">bool</span> using_chunks)
<a name="l00405"></a>00405     {
<a name="l00406"></a>00406         changeHeader(HEADER_CONNECTION, (keep_alive ? <span class="stringliteral">"Keep-Alive"</span> : <span class="stringliteral">"close"</span>) );
<a name="l00407"></a>00407         <span class="keywordflow">if</span> (using_chunks) {
<a name="l00408"></a>00408             <span class="keywordflow">if</span> (getChunksSupported())
<a name="l00409"></a>00409                 changeHeader(HEADER_TRANSFER_ENCODING, <span class="stringliteral">"chunked"</span>);
<a name="l00410"></a>00410         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (! m_do_not_send_content_length) {
<a name="l00411"></a>00411             changeHeader(HEADER_CONTENT_LENGTH, boost::lexical_cast&lt;std::string&gt;(getContentLength()));
<a name="l00412"></a>00412         }
<a name="l00413"></a>00413     }
<a name="l00414"></a>00414 
<a name="l00420"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#5d93bfb797fbf542ec05d98bd04a8243">00420</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> appendHeaders(<a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#f5c0864ef7e05dbab79ae4f37de123b2">WriteBuffers</a>&amp; write_buffers) {
<a name="l00421"></a>00421         <span class="comment">// add HTTP headers</span>
<a name="l00422"></a>00422         <span class="keywordflow">for</span> (Headers::const_iterator i = m_headers.begin(); i != m_headers.end(); ++i) {
<a name="l00423"></a>00423             write_buffers.push_back(boost::asio::buffer(i-&gt;first));
<a name="l00424"></a>00424             write_buffers.push_back(boost::asio::buffer(HEADER_NAME_VALUE_DELIMITER));
<a name="l00425"></a>00425             write_buffers.push_back(boost::asio::buffer(i-&gt;second));
<a name="l00426"></a>00426             write_buffers.push_back(boost::asio::buffer(STRING_CRLF));
<a name="l00427"></a>00427         }
<a name="l00428"></a>00428         <span class="comment">// add an extra CRLF to end HTTP headers</span>
<a name="l00429"></a>00429         write_buffers.push_back(boost::asio::buffer(STRING_CRLF));
<a name="l00430"></a>00430     }
<a name="l00431"></a>00431 
<a name="l00440"></a>00440     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> DictionaryType&gt;
<a name="l00441"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#06c7c375b2a149c482dbe8f57c2b2b0c">00441</a>     <span class="keyword">inline</span> <span class="keyword">static</span> <span class="keyword">const</span> std::string&amp; getValue(<span class="keyword">const</span> DictionaryType&amp; dict,
<a name="l00442"></a>00442                                               <span class="keyword">const</span> std::string&amp; key)
<a name="l00443"></a>00443     {
<a name="l00444"></a>00444         <span class="keyword">typename</span> DictionaryType::const_iterator i = dict.find(key);
<a name="l00445"></a>00445         <span class="keywordflow">return</span> ( (i==dict.end()) ? STRING_EMPTY : i-&gt;second );
<a name="l00446"></a>00446     }
<a name="l00447"></a>00447 
<a name="l00457"></a>00457     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> DictionaryType&gt;
<a name="l00458"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#e16482d04ca8cd5942f3fddc3187205a">00458</a>     <span class="keyword">inline</span> <span class="keyword">static</span> <span class="keywordtype">void</span> changeValue(DictionaryType&amp; dict,
<a name="l00459"></a>00459                                    <span class="keyword">const</span> std::string&amp; key, <span class="keyword">const</span> std::string&amp; value)
<a name="l00460"></a>00460 
<a name="l00461"></a>00461     {
<a name="l00462"></a>00462         <span class="comment">// retrieve all current values for key</span>
<a name="l00463"></a>00463         std::pair&lt;typename DictionaryType::iterator, typename DictionaryType::iterator&gt;
<a name="l00464"></a>00464             result_pair = dict.equal_range(key);
<a name="l00465"></a>00465         <span class="keywordflow">if</span> (result_pair.first == dict.end()) {
<a name="l00466"></a>00466             <span class="comment">// no values exist -&gt; add a new key</span>
<a name="l00467"></a>00467             dict.insert(std::make_pair(key, value));
<a name="l00468"></a>00468         } <span class="keywordflow">else</span> {
<a name="l00469"></a>00469             <span class="comment">// set the first value found for the key to the new one</span>
<a name="l00470"></a>00470             result_pair.first-&gt;second = value;
<a name="l00471"></a>00471             <span class="comment">// remove any remaining values</span>
<a name="l00472"></a>00472             <span class="keyword">typename</span> DictionaryType::iterator i;
<a name="l00473"></a>00473             ++(result_pair.first);
<a name="l00474"></a>00474             <span class="keywordflow">while</span> (result_pair.first != result_pair.second) {
<a name="l00475"></a>00475                 i = result_pair.first;
<a name="l00476"></a>00476                 ++(result_pair.first);
<a name="l00477"></a>00477                 dict.erase(i);
<a name="l00478"></a>00478             }
<a name="l00479"></a>00479         }
<a name="l00480"></a>00480     }
<a name="l00481"></a>00481 
<a name="l00488"></a>00488     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> DictionaryType&gt;
<a name="l00489"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#27cc91e8ef1102d89d121e84b8acc04e">00489</a>     <span class="keyword">inline</span> <span class="keyword">static</span> <span class="keywordtype">void</span> deleteValue(DictionaryType&amp; dict,
<a name="l00490"></a>00490                                    <span class="keyword">const</span> std::string&amp; key)
<a name="l00491"></a>00491     {
<a name="l00492"></a>00492         std::pair&lt;typename DictionaryType::iterator, typename DictionaryType::iterator&gt;
<a name="l00493"></a>00493             result_pair = dict.equal_range(key);
<a name="l00494"></a>00494         <span class="keywordflow">if</span> (result_pair.first != dict.end())
<a name="l00495"></a>00495             dict.erase(result_pair.first, result_pair.second);
<a name="l00496"></a>00496     }
<a name="l00497"></a>00497 
<a name="l00500"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#8ef558467d51e92770cd5173737a3a3b">00500</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> clearFirstLine(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{
<a name="l00501"></a>00501         <span class="keywordflow">if</span> (! m_first_line.empty())
<a name="l00502"></a>00502             m_first_line.clear();
<a name="l00503"></a>00503     }
<a name="l00504"></a>00504 
<a name="l00506"></a>00506     <span class="keyword">virtual</span> <span class="keywordtype">void</span> updateFirstLine(<span class="keywordtype">void</span>) <span class="keyword">const </span>= 0;
<a name="l00507"></a>00507 
<a name="l00508"></a>00508 
<a name="l00511"></a><a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#0e65511480a8f3c82dd0311912f7b7a4">00511</a>     <span class="keyword">mutable</span> std::string             m_first_line;
<a name="l00512"></a>00512 
<a name="l00513"></a>00513 
<a name="l00514"></a>00514 <span class="keyword">private</span>:
<a name="l00515"></a>00515 
<a name="l00517"></a>00517     <span class="keyword">static</span> <span class="keyword">const</span> boost::regex       REGEX_ICASE_CHUNKED;
<a name="l00518"></a>00518 
<a name="l00520"></a>00520     <span class="keywordtype">bool</span>                            m_is_valid;
<a name="l00521"></a>00521 
<a name="l00523"></a>00523     <span class="keywordtype">bool</span>                            m_is_chunked;
<a name="l00524"></a>00524 
<a name="l00526"></a>00526     <span class="keywordtype">bool</span>                            m_chunks_supported;
<a name="l00527"></a>00527 
<a name="l00529"></a>00529     <span class="keywordtype">bool</span>                            m_do_not_send_content_length;
<a name="l00530"></a>00530 
<a name="l00532"></a>00532     boost::asio::ip::address        m_remote_ip;
<a name="l00533"></a>00533 
<a name="l00535"></a>00535     boost::uint16_t                 m_version_major;
<a name="l00536"></a>00536 
<a name="l00538"></a>00538     boost::uint16_t                 m_version_minor;
<a name="l00539"></a>00539 
<a name="l00541"></a>00541     std::size_t                     m_content_length;
<a name="l00542"></a>00542 
<a name="l00544"></a>00544     boost::scoped_array&lt;char&gt;       m_content_buf;
<a name="l00545"></a>00545 
<a name="l00547"></a>00547     <a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#3f51e42afcccf433e7992b55b9797d13">ChunkCache</a>                      m_chunk_cache;
<a name="l00548"></a>00548 
<a name="l00550"></a>00550     Headers                         m_headers;
<a name="l00551"></a>00551 
<a name="l00553"></a>00553     CookieParams                    m_cookie_params;
<a name="l00554"></a>00554 
<a name="l00556"></a>00556     <a class="code" href="classpion_1_1net_1_1_h_t_t_p_message.html#bea948e6ee65e2d477356d825ad005fa">DataStatus</a>                      m_status;
<a name="l00557"></a>00557 
<a name="l00559"></a>00559     <span class="keywordtype">bool</span>                            m_has_missing_packets;
<a name="l00560"></a>00560 
<a name="l00562"></a>00562     <span class="keywordtype">bool</span>                            m_has_data_after_missing;
<a name="l00563"></a>00563 };
<a name="l00564"></a>00564 
<a name="l00565"></a>00565 
<a name="l00566"></a>00566 }   <span class="comment">// end namespace net</span>
<a name="l00567"></a>00567 }   <span class="comment">// end namespace pion</span>
<a name="l00568"></a>00568 
<a name="l00569"></a>00569 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Aug 10 15:23:13 2010 for pion-net by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
