<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>pion-net: common/include/pion/PluginManager.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>common/include/pion/PluginManager.hpp</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// -----------------------------------------------------------------------</span>
<a name="l00002"></a>00002 <span class="comment">// pion-common: a collection of common libraries used by the Pion Platform</span>
<a name="l00003"></a>00003 <span class="comment">// -----------------------------------------------------------------------</span>
<a name="l00004"></a>00004 <span class="comment">// Copyright (C) 2007-2008 Atomic Labs, Inc.  (http://www.atomiclabs.com)</span>
<a name="l00005"></a>00005 <span class="comment">//</span>
<a name="l00006"></a>00006 <span class="comment">// Distributed under the Boost Software License, Version 1.0.</span>
<a name="l00007"></a>00007 <span class="comment">// See http://www.boost.org/LICENSE_1_0.txt</span>
<a name="l00008"></a>00008 <span class="comment">//</span>
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <span class="preprocessor">#ifndef __PION_PLUGINMANAGER_HEADER__</span>
<a name="l00011"></a>00011 <span class="preprocessor"></span><span class="preprocessor">#define __PION_PLUGINMANAGER_HEADER__</span>
<a name="l00012"></a>00012 <span class="preprocessor"></span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;map&gt;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;boost/cstdint.hpp&gt;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &lt;boost/function.hpp&gt;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &lt;boost/function/function1.hpp&gt;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &lt;boost/thread/mutex.hpp&gt;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &lt;pion/PionConfig.hpp&gt;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;pion/PionException.hpp&gt;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;pion/PionPlugin.hpp&gt;</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="keyword">namespace </span>pion {    <span class="comment">// begin namespace pion</span>
<a name="l00025"></a>00025 
<a name="l00029"></a>00029 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> PLUGIN_TYPE&gt;
<a name="l00030"></a><a class="code" href="classpion_1_1_plugin_manager.html">00030</a> <span class="keyword">class </span><a class="code" href="classpion_1_1_plugin_manager.html">PluginManager</a>
<a name="l00031"></a>00031 {
<a name="l00032"></a>00032 <span class="keyword">public</span>:
<a name="l00033"></a>00033 
<a name="l00035"></a><a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_not_found_exception.html">00035</a>     <span class="keyword">class </span><a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_not_found_exception.html">PluginNotFoundException</a> : <span class="keyword">public</span> <a class="code" href="classpion_1_1_pion_exception.html">PionException</a> {
<a name="l00036"></a>00036     <span class="keyword">public</span>:
<a name="l00037"></a><a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_not_found_exception.html#b6a718014262eafd5074c9dbb6e7b175">00037</a>         <a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_not_found_exception.html#b6a718014262eafd5074c9dbb6e7b175">PluginNotFoundException</a>(<span class="keyword">const</span> std::string&amp; plugin_id)
<a name="l00038"></a>00038             : <a class="code" href="classpion_1_1_pion_exception.html">PionException</a>(<span class="stringliteral">"No plug-ins found for identifier: "</span>, plugin_id) {}
<a name="l00039"></a>00039     };
<a name="l00040"></a>00040 
<a name="l00042"></a><a class="code" href="classpion_1_1_plugin_manager_1_1_duplicate_plugin_exception.html">00042</a>     <span class="keyword">class </span><a class="code" href="classpion_1_1_plugin_manager_1_1_duplicate_plugin_exception.html">DuplicatePluginException</a> : <span class="keyword">public</span> <a class="code" href="classpion_1_1_pion_exception.html">PionException</a> {
<a name="l00043"></a>00043     <span class="keyword">public</span>:
<a name="l00044"></a><a class="code" href="classpion_1_1_plugin_manager_1_1_duplicate_plugin_exception.html#149c82e5441e70d07b95874bc8014603">00044</a>         <a class="code" href="classpion_1_1_plugin_manager_1_1_duplicate_plugin_exception.html#149c82e5441e70d07b95874bc8014603">DuplicatePluginException</a>(<span class="keyword">const</span> std::string&amp; plugin_id)
<a name="l00045"></a>00045             : <a class="code" href="classpion_1_1_pion_exception.html">PionException</a>(<span class="stringliteral">"A plug-in already exists for identifier: "</span>, plugin_id) {}
<a name="l00046"></a>00046     };
<a name="l00047"></a>00047     
<a name="l00049"></a><a class="code" href="classpion_1_1_plugin_manager.html#84fcb9e5c2563c2fdc98c80ad068d18c">00049</a>     <span class="keyword">typedef</span> boost::function1&lt;void, PLUGIN_TYPE*&gt;    <a class="code" href="classpion_1_1_plugin_manager.html#84fcb9e5c2563c2fdc98c80ad068d18c">PluginRunFunction</a>;
<a name="l00050"></a>00050 
<a name="l00052"></a><a class="code" href="classpion_1_1_plugin_manager.html#bb338cf31f477dcbb6263c806808cd33">00052</a>     <span class="keyword">typedef</span> boost::function1&lt;boost::uint64_t, const PLUGIN_TYPE*&gt;   <a class="code" href="classpion_1_1_plugin_manager.html#bb338cf31f477dcbb6263c806808cd33">PluginStatFunction</a>;
<a name="l00053"></a>00053 
<a name="l00054"></a>00054     
<a name="l00056"></a><a class="code" href="classpion_1_1_plugin_manager.html#234cb40d7c31bee524e2b9a14032328f">00056</a>     <a class="code" href="classpion_1_1_plugin_manager.html#234cb40d7c31bee524e2b9a14032328f">PluginManager</a>(<span class="keywordtype">void</span>) {}
<a name="l00057"></a>00057 
<a name="l00059"></a><a class="code" href="classpion_1_1_plugin_manager.html#fd4a8a19dd9f46a09c0419842b5414dc">00059</a>     <span class="keyword">virtual</span> <a class="code" href="classpion_1_1_plugin_manager.html#fd4a8a19dd9f46a09c0419842b5414dc">~PluginManager</a>() {}
<a name="l00060"></a>00060 
<a name="l00062"></a><a class="code" href="classpion_1_1_plugin_manager.html#457bf22f0c9c1a99e294dc48fa6f9167">00062</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpion_1_1_plugin_manager.html#457bf22f0c9c1a99e294dc48fa6f9167">clear</a>(<span class="keywordtype">void</span>) {
<a name="l00063"></a>00063         boost::mutex::scoped_lock plugins_lock(<a class="code" href="classpion_1_1_plugin_manager.html#0958ce38207660bf6fb8dc1124037b93">m_plugin_mutex</a>);
<a name="l00064"></a>00064         <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.<a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_map.html#670a96cfe235723fecc7e36a1bcbbd46">clear</a>();
<a name="l00065"></a>00065     }
<a name="l00066"></a>00066     
<a name="l00068"></a><a class="code" href="classpion_1_1_plugin_manager.html#784cf89f562f850d004b4907ea926d93">00068</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classpion_1_1_plugin_manager.html#784cf89f562f850d004b4907ea926d93">empty</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ 
<a name="l00069"></a>00069         boost::mutex::scoped_lock plugins_lock(<a class="code" href="classpion_1_1_plugin_manager.html#0958ce38207660bf6fb8dc1124037b93">m_plugin_mutex</a>);
<a name="l00070"></a>00070         <span class="keywordflow">return</span> <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.empty();
<a name="l00071"></a>00071     }
<a name="l00072"></a>00072     
<a name="l00079"></a>00079     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpion_1_1_plugin_manager.html#5a1dd110f80ce4e2cb4c978defe5a5b7">add</a>(<span class="keyword">const</span> std::string&amp; plugin_id, PLUGIN_TYPE *plugin_object_ptr);
<a name="l00080"></a>00080     
<a name="l00086"></a>00086     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpion_1_1_plugin_manager.html#961a2a040cb0925953398432f43afd2a">remove</a>(<span class="keyword">const</span> std::string&amp; plugin_id);
<a name="l00087"></a>00087     
<a name="l00094"></a>00094     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpion_1_1_plugin_manager.html#21b1b788f26be21a014164d4e9335c13">replace</a>(<span class="keyword">const</span> std::string&amp; plugin_id, PLUGIN_TYPE *plugin_ptr);
<a name="l00095"></a>00095     
<a name="l00102"></a>00102     <span class="keyword">inline</span> PLUGIN_TYPE *<a class="code" href="classpion_1_1_plugin_manager.html#f6f1baf759b1908540559d0294dda604">clone</a>(<span class="keyword">const</span> std::string&amp; plugin_id);
<a name="l00103"></a>00103 
<a name="l00112"></a>00112     <span class="keyword">inline</span> PLUGIN_TYPE *<a class="code" href="classpion_1_1_plugin_manager.html#9c9bbc3656de1d56670a6b23335cf736">load</a>(<span class="keyword">const</span> std::string&amp; plugin_id, <span class="keyword">const</span> std::string&amp; plugin_type);
<a name="l00113"></a>00113     
<a name="l00120"></a>00120     <span class="keyword">inline</span> PLUGIN_TYPE *<a class="code" href="classpion_1_1_plugin_manager.html#5da2fd956ba48878c32d44f6f62c04fc">get</a>(<span class="keyword">const</span> std::string&amp; plugin_id);
<a name="l00121"></a>00121     
<a name="l00128"></a>00128     <span class="keyword">inline</span> <span class="keyword">const</span> PLUGIN_TYPE *<a class="code" href="classpion_1_1_plugin_manager.html#5da2fd956ba48878c32d44f6f62c04fc">get</a>(<span class="keyword">const</span> std::string&amp; plugin_id) <span class="keyword">const</span>;
<a name="l00129"></a>00129     
<a name="l00136"></a>00136     <span class="keyword">inline</span> <a class="code" href="classpion_1_1_pion_plugin_ptr.html">PionPluginPtr&lt;PLUGIN_TYPE&gt;</a> <a class="code" href="classpion_1_1_plugin_manager.html#d1d7a2e4ed966af3fe05b74ac4159468">getLibPtr</a>(<span class="keyword">const</span> std::string&amp; plugin_id) <span class="keyword">const</span>;
<a name="l00137"></a>00137     
<a name="l00144"></a>00144     <span class="keyword">inline</span> PLUGIN_TYPE *<a class="code" href="classpion_1_1_plugin_manager.html#ecb7e9ad695760383b68984985a39841">find</a>(<span class="keyword">const</span> std::string&amp; resource);
<a name="l00145"></a>00145     
<a name="l00151"></a>00151     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpion_1_1_plugin_manager.html#acd10f940ddd9650d24a91d79a9df929">run</a>(<a class="code" href="classpion_1_1_plugin_manager.html#84fcb9e5c2563c2fdc98c80ad068d18c">PluginRunFunction</a> run_func);
<a name="l00152"></a>00152     
<a name="l00159"></a>00159     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpion_1_1_plugin_manager.html#acd10f940ddd9650d24a91d79a9df929">run</a>(<span class="keyword">const</span> std::string&amp; plugin_id, <a class="code" href="classpion_1_1_plugin_manager.html#84fcb9e5c2563c2fdc98c80ad068d18c">PluginRunFunction</a> run_func);
<a name="l00160"></a>00160     
<a name="l00166"></a>00166     <span class="keyword">inline</span> boost::uint64_t <a class="code" href="classpion_1_1_plugin_manager.html#858c63af532d772270418df0e46b5e46">getStatistic</a>(<a class="code" href="classpion_1_1_plugin_manager.html#bb338cf31f477dcbb6263c806808cd33">PluginStatFunction</a> stat_func) <span class="keyword">const</span>;
<a name="l00167"></a>00167     
<a name="l00174"></a>00174     <span class="keyword">inline</span> boost::uint64_t <a class="code" href="classpion_1_1_plugin_manager.html#858c63af532d772270418df0e46b5e46">getStatistic</a>(<span class="keyword">const</span> std::string&amp; plugin_id,
<a name="l00175"></a>00175                                         <a class="code" href="classpion_1_1_plugin_manager.html#bb338cf31f477dcbb6263c806808cd33">PluginStatFunction</a> stat_func) <span class="keyword">const</span>;
<a name="l00176"></a>00176         
<a name="l00177"></a>00177     
<a name="l00178"></a>00178 <span class="keyword">protected</span>:
<a name="l00179"></a>00179     
<a name="l00181"></a><a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_map.html">00181</a>     <span class="keyword">class </span><a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_map.html">PluginMap</a>
<a name="l00182"></a>00182         : <span class="keyword">public</span> std::map&lt;std::string, std::pair&lt;PLUGIN_TYPE *, PionPluginPtr&lt;PLUGIN_TYPE&gt; &gt; &gt;
<a name="l00183"></a>00183     {
<a name="l00184"></a>00184     <span class="keyword">public</span>:
<a name="l00185"></a>00185         <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_map.html#670a96cfe235723fecc7e36a1bcbbd46">clear</a>(<span class="keywordtype">void</span>);
<a name="l00186"></a><a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_map.html#bf7cb55c7bba2e0181c506615e81026e">00186</a>         <span class="keyword">virtual</span> <a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_map.html#bf7cb55c7bba2e0181c506615e81026e">~PluginMap</a>() { <a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_map.html#670a96cfe235723fecc7e36a1bcbbd46">PluginMap::clear</a>(); }
<a name="l00187"></a><a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_map.html#1ae66904bb096f2defe5c39cc2e3a603">00187</a>         <a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_map.html#1ae66904bb096f2defe5c39cc2e3a603">PluginMap</a>(<span class="keywordtype">void</span>) {}
<a name="l00188"></a>00188     };
<a name="l00189"></a>00189     
<a name="l00191"></a><a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">00191</a>     <a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_map.html">PluginMap</a>                       <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>;
<a name="l00192"></a>00192 
<a name="l00194"></a><a class="code" href="classpion_1_1_plugin_manager.html#0958ce38207660bf6fb8dc1124037b93">00194</a>     <span class="keyword">mutable</span> boost::mutex            <a class="code" href="classpion_1_1_plugin_manager.html#0958ce38207660bf6fb8dc1124037b93">m_plugin_mutex</a>;
<a name="l00195"></a>00195 };
<a name="l00196"></a>00196 
<a name="l00197"></a>00197     
<a name="l00198"></a>00198 <span class="comment">// PluginManager member functions</span>
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> PLUGIN_TYPE&gt;
<a name="l00201"></a><a class="code" href="classpion_1_1_plugin_manager.html#5a1dd110f80ce4e2cb4c978defe5a5b7">00201</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpion_1_1_plugin_manager.html">PluginManager&lt;PLUGIN_TYPE&gt;::add</a>(<span class="keyword">const</span> std::string&amp; plugin_id,
<a name="l00202"></a>00202                                             PLUGIN_TYPE *plugin_object_ptr)
<a name="l00203"></a>00203 {
<a name="l00204"></a>00204     <a class="code" href="classpion_1_1_pion_plugin_ptr.html">PionPluginPtr&lt;PLUGIN_TYPE&gt;</a> plugin_ptr;
<a name="l00205"></a>00205     boost::mutex::scoped_lock plugins_lock(<a class="code" href="classpion_1_1_plugin_manager.html#0958ce38207660bf6fb8dc1124037b93">m_plugin_mutex</a>);
<a name="l00206"></a>00206     <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.insert(std::make_pair(plugin_id,
<a name="l00207"></a>00207                                        std::make_pair(plugin_object_ptr, plugin_ptr)));
<a name="l00208"></a>00208 }
<a name="l00209"></a>00209 
<a name="l00210"></a>00210 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> PLUGIN_TYPE&gt;
<a name="l00211"></a><a class="code" href="classpion_1_1_plugin_manager.html#961a2a040cb0925953398432f43afd2a">00211</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpion_1_1_plugin_manager.html">PluginManager&lt;PLUGIN_TYPE&gt;::remove</a>(<span class="keyword">const</span> std::string&amp; plugin_id)
<a name="l00212"></a>00212 {
<a name="l00213"></a>00213     boost::mutex::scoped_lock plugins_lock(<a class="code" href="classpion_1_1_plugin_manager.html#0958ce38207660bf6fb8dc1124037b93">m_plugin_mutex</a>);
<a name="l00214"></a>00214     <span class="keyword">typename</span> <a class="code" href="classpion_1_1_plugin_manager.html">pion::PluginManager&lt;PLUGIN_TYPE&gt;::PluginMap::iterator</a> i = <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.find(plugin_id);
<a name="l00215"></a>00215     <span class="keywordflow">if</span> (i == <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.end())
<a name="l00216"></a>00216         <span class="keywordflow">throw</span> <a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_not_found_exception.html">PluginNotFoundException</a>(plugin_id);
<a name="l00217"></a>00217     <span class="keywordflow">if</span> (i-&gt;second.second.is_open()) {
<a name="l00218"></a>00218         i-&gt;second.second.destroy(i-&gt;second.first);
<a name="l00219"></a>00219     } <span class="keywordflow">else</span> {
<a name="l00220"></a>00220         <span class="keyword">delete</span> i-&gt;second.first;
<a name="l00221"></a>00221     }
<a name="l00222"></a>00222     <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.erase(i);
<a name="l00223"></a>00223 }
<a name="l00224"></a>00224 
<a name="l00225"></a>00225 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> PLUGIN_TYPE&gt;
<a name="l00226"></a><a class="code" href="classpion_1_1_plugin_manager.html#21b1b788f26be21a014164d4e9335c13">00226</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpion_1_1_plugin_manager.html">PluginManager&lt;PLUGIN_TYPE&gt;::replace</a>(<span class="keyword">const</span> std::string&amp; plugin_id, PLUGIN_TYPE *plugin_ptr)
<a name="l00227"></a>00227 {
<a name="l00228"></a>00228     PION_ASSERT(plugin_ptr);
<a name="l00229"></a>00229     boost::mutex::scoped_lock plugins_lock(<a class="code" href="classpion_1_1_plugin_manager.html#0958ce38207660bf6fb8dc1124037b93">m_plugin_mutex</a>);
<a name="l00230"></a>00230     <span class="keyword">typename</span> <a class="code" href="classpion_1_1_plugin_manager.html">pion::PluginManager&lt;PLUGIN_TYPE&gt;::PluginMap::iterator</a> i = <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.find(plugin_id);
<a name="l00231"></a>00231     <span class="keywordflow">if</span> (i == <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.end())
<a name="l00232"></a>00232         <span class="keywordflow">throw</span> <a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_not_found_exception.html">PluginNotFoundException</a>(plugin_id);
<a name="l00233"></a>00233     <span class="keywordflow">if</span> (i-&gt;second.second.is_open()) {
<a name="l00234"></a>00234         i-&gt;second.second.destroy(i-&gt;second.first);
<a name="l00235"></a>00235     } <span class="keywordflow">else</span> {
<a name="l00236"></a>00236         <span class="keyword">delete</span> i-&gt;second.first;
<a name="l00237"></a>00237     }
<a name="l00238"></a>00238     i-&gt;second.first = plugin_ptr;
<a name="l00239"></a>00239 }
<a name="l00240"></a>00240 
<a name="l00241"></a>00241 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> PLUGIN_TYPE&gt;
<a name="l00242"></a><a class="code" href="classpion_1_1_plugin_manager.html#f6f1baf759b1908540559d0294dda604">00242</a> <span class="keyword">inline</span> PLUGIN_TYPE *<a class="code" href="classpion_1_1_plugin_manager.html">PluginManager&lt;PLUGIN_TYPE&gt;::clone</a>(<span class="keyword">const</span> std::string&amp; plugin_id)
<a name="l00243"></a>00243 {
<a name="l00244"></a>00244     boost::mutex::scoped_lock plugins_lock(<a class="code" href="classpion_1_1_plugin_manager.html#0958ce38207660bf6fb8dc1124037b93">m_plugin_mutex</a>);
<a name="l00245"></a>00245     <span class="keyword">typename</span> <a class="code" href="classpion_1_1_plugin_manager.html">pion::PluginManager&lt;PLUGIN_TYPE&gt;::PluginMap::iterator</a> i = <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.find(plugin_id);
<a name="l00246"></a>00246     <span class="keywordflow">if</span> (i == <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.end())
<a name="l00247"></a>00247         <span class="keywordflow">throw</span> <a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_not_found_exception.html">PluginNotFoundException</a>(plugin_id);
<a name="l00248"></a>00248     <span class="keywordflow">return</span> i-&gt;second.second.create();
<a name="l00249"></a>00249 }
<a name="l00250"></a>00250 
<a name="l00251"></a>00251 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> PLUGIN_TYPE&gt;
<a name="l00252"></a><a class="code" href="classpion_1_1_plugin_manager.html#9c9bbc3656de1d56670a6b23335cf736">00252</a> <span class="keyword">inline</span> PLUGIN_TYPE *<a class="code" href="classpion_1_1_plugin_manager.html">PluginManager&lt;PLUGIN_TYPE&gt;::load</a>(<span class="keyword">const</span> std::string&amp; plugin_id,
<a name="l00253"></a>00253                                                      <span class="keyword">const</span> std::string&amp; plugin_type)
<a name="l00254"></a>00254 {
<a name="l00255"></a>00255     <span class="comment">// search for the plug-in file using the configured paths</span>
<a name="l00256"></a>00256     <span class="keywordtype">bool</span> is_static;
<a name="l00257"></a>00257     <span class="keywordtype">void</span> *create_func;
<a name="l00258"></a>00258     <span class="keywordtype">void</span> *destroy_func;
<a name="l00259"></a>00259     
<a name="l00260"></a>00260     <span class="keywordflow">if</span> (<a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.find(plugin_id) != <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.end())
<a name="l00261"></a>00261         <span class="keywordflow">throw</span> <a class="code" href="classpion_1_1_plugin_manager_1_1_duplicate_plugin_exception.html">DuplicatePluginException</a>(plugin_id);
<a name="l00262"></a>00262     
<a name="l00263"></a>00263     <span class="comment">// check if plug-in is statically linked, and if not, try to resolve for dynamic</span>
<a name="l00264"></a>00264     is_static = <a class="code" href="classpion_1_1_pion_plugin.html#08a062de584f2fa4c9362698c9df6a65">PionPlugin::findStaticEntryPoint</a>(plugin_type, &amp;create_func, &amp;destroy_func);
<a name="l00265"></a>00265     
<a name="l00266"></a>00266     <span class="comment">// open up the plug-in's shared object library</span>
<a name="l00267"></a>00267     <a class="code" href="classpion_1_1_pion_plugin_ptr.html">PionPluginPtr&lt;PLUGIN_TYPE&gt;</a> plugin_ptr;
<a name="l00268"></a>00268     <span class="keywordflow">if</span> (is_static) {
<a name="l00269"></a>00269         plugin_ptr.<a class="code" href="classpion_1_1_pion_plugin.html#6fda0169fe98216476c26047c9714a13">openStaticLinked</a>(plugin_type, create_func, destroy_func);    <span class="comment">// may throw</span>
<a name="l00270"></a>00270     } <span class="keywordflow">else</span> {
<a name="l00271"></a>00271         plugin_ptr.<a class="code" href="classpion_1_1_pion_plugin.html#450a3bc846691a67dd44c918d102479c">open</a>(plugin_type);   <span class="comment">// may throw</span>
<a name="l00272"></a>00272     }
<a name="l00273"></a>00273     
<a name="l00274"></a>00274     <span class="comment">// create a new object using the plug-in library</span>
<a name="l00275"></a>00275     PLUGIN_TYPE *plugin_object_ptr(plugin_ptr.<a class="code" href="classpion_1_1_pion_plugin_ptr.html#d61b3cdbf944d544a9033843c3e3c22e">create</a>());
<a name="l00276"></a>00276     
<a name="l00277"></a>00277     <span class="comment">// add the new plug-in object to our map</span>
<a name="l00278"></a>00278     boost::mutex::scoped_lock plugins_lock(<a class="code" href="classpion_1_1_plugin_manager.html#0958ce38207660bf6fb8dc1124037b93">m_plugin_mutex</a>);
<a name="l00279"></a>00279     <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.insert(std::make_pair(plugin_id,
<a name="l00280"></a>00280                                        std::make_pair(plugin_object_ptr, plugin_ptr)));
<a name="l00281"></a>00281 
<a name="l00282"></a>00282     <span class="keywordflow">return</span> plugin_object_ptr;
<a name="l00283"></a>00283 }
<a name="l00284"></a>00284 
<a name="l00285"></a>00285 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> PLUGIN_TYPE&gt;
<a name="l00286"></a><a class="code" href="classpion_1_1_plugin_manager.html#5da2fd956ba48878c32d44f6f62c04fc">00286</a> <span class="keyword">inline</span> PLUGIN_TYPE *<a class="code" href="classpion_1_1_plugin_manager.html">PluginManager&lt;PLUGIN_TYPE&gt;::get</a>(<span class="keyword">const</span> std::string&amp; plugin_id)
<a name="l00287"></a>00287 {
<a name="l00288"></a>00288     PLUGIN_TYPE *plugin_object_ptr = NULL;
<a name="l00289"></a>00289     boost::mutex::scoped_lock plugins_lock(<a class="code" href="classpion_1_1_plugin_manager.html#0958ce38207660bf6fb8dc1124037b93">m_plugin_mutex</a>);
<a name="l00290"></a>00290     <span class="keyword">typename</span> <a class="code" href="classpion_1_1_plugin_manager.html">pion::PluginManager&lt;PLUGIN_TYPE&gt;::PluginMap::iterator</a> i = <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.find(plugin_id);
<a name="l00291"></a>00291     <span class="keywordflow">if</span> (i != <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.end())
<a name="l00292"></a>00292         plugin_object_ptr = i-&gt;second.first;
<a name="l00293"></a>00293     <span class="keywordflow">return</span> plugin_object_ptr;
<a name="l00294"></a>00294 }
<a name="l00295"></a>00295     
<a name="l00296"></a>00296 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> PLUGIN_TYPE&gt;
<a name="l00297"></a><a class="code" href="classpion_1_1_plugin_manager.html#a80c6c25096195506839107526e64c30">00297</a> <span class="keyword">inline</span> <span class="keyword">const</span> PLUGIN_TYPE *<a class="code" href="classpion_1_1_plugin_manager.html">PluginManager&lt;PLUGIN_TYPE&gt;::get</a>(<span class="keyword">const</span> std::string&amp; plugin_id)<span class="keyword"> const</span>
<a name="l00298"></a>00298 <span class="keyword"></span>{
<a name="l00299"></a>00299     <span class="keyword">const</span> PLUGIN_TYPE *plugin_object_ptr = NULL;
<a name="l00300"></a>00300     boost::mutex::scoped_lock plugins_lock(<a class="code" href="classpion_1_1_plugin_manager.html#0958ce38207660bf6fb8dc1124037b93">m_plugin_mutex</a>);
<a name="l00301"></a>00301     <span class="keyword">typename</span> <a class="code" href="classpion_1_1_plugin_manager.html">pion::PluginManager&lt;PLUGIN_TYPE&gt;::PluginMap::const_iterator</a> i = <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.find(plugin_id);
<a name="l00302"></a>00302     <span class="keywordflow">if</span> (i != <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.end())
<a name="l00303"></a>00303         plugin_object_ptr = i-&gt;second.first;
<a name="l00304"></a>00304     <span class="keywordflow">return</span> plugin_object_ptr;
<a name="l00305"></a>00305 }
<a name="l00306"></a>00306     
<a name="l00307"></a>00307 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> PLUGIN_TYPE&gt;
<a name="l00308"></a><a class="code" href="classpion_1_1_plugin_manager.html#d1d7a2e4ed966af3fe05b74ac4159468">00308</a> <span class="keyword">inline</span> <a class="code" href="classpion_1_1_pion_plugin_ptr.html">PionPluginPtr&lt;PLUGIN_TYPE&gt;</a> <a class="code" href="classpion_1_1_plugin_manager.html">PluginManager&lt;PLUGIN_TYPE&gt;::getLibPtr</a>(<span class="keyword">const</span> std::string&amp; plugin_id)<span class="keyword"> const</span>
<a name="l00309"></a>00309 <span class="keyword"></span>{
<a name="l00310"></a>00310     <a class="code" href="classpion_1_1_pion_plugin_ptr.html">PionPluginPtr&lt;PLUGIN_TYPE&gt;</a> plugin_ptr;
<a name="l00311"></a>00311     boost::mutex::scoped_lock plugins_lock(<a class="code" href="classpion_1_1_plugin_manager.html#0958ce38207660bf6fb8dc1124037b93">m_plugin_mutex</a>);
<a name="l00312"></a>00312     <span class="keyword">typename</span> <a class="code" href="classpion_1_1_plugin_manager.html">pion::PluginManager&lt;PLUGIN_TYPE&gt;::PluginMap::const_iterator</a> i = <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.find(plugin_id);
<a name="l00313"></a>00313     <span class="keywordflow">if</span> (i != <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.end())
<a name="l00314"></a>00314         plugin_ptr = i-&gt;second.second;
<a name="l00315"></a>00315     <span class="keywordflow">return</span> plugin_ptr;
<a name="l00316"></a>00316 }       
<a name="l00317"></a>00317 
<a name="l00318"></a>00318 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> PLUGIN_TYPE&gt;
<a name="l00319"></a><a class="code" href="classpion_1_1_plugin_manager.html#ecb7e9ad695760383b68984985a39841">00319</a> <span class="keyword">inline</span> PLUGIN_TYPE *<a class="code" href="classpion_1_1_plugin_manager.html">PluginManager&lt;PLUGIN_TYPE&gt;::find</a>(<span class="keyword">const</span> std::string&amp; resource)
<a name="l00320"></a>00320 {
<a name="l00321"></a>00321     <span class="comment">// will point to the matching plug-in object, if found</span>
<a name="l00322"></a>00322     PLUGIN_TYPE *plugin_object_ptr = NULL;
<a name="l00323"></a>00323     
<a name="l00324"></a>00324     <span class="comment">// lock mutex for thread safety (this should probably use ref counters)</span>
<a name="l00325"></a>00325     boost::mutex::scoped_lock plugins_lock(<a class="code" href="classpion_1_1_plugin_manager.html#0958ce38207660bf6fb8dc1124037b93">m_plugin_mutex</a>);
<a name="l00326"></a>00326     
<a name="l00327"></a>00327     <span class="comment">// check if no plug-ins are being managed</span>
<a name="l00328"></a>00328     <span class="keywordflow">if</span> (<a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.empty()) <span class="keywordflow">return</span> plugin_object_ptr;
<a name="l00329"></a>00329     
<a name="l00330"></a>00330     <span class="comment">// iterate through each plug-in whose identifier may match the resource</span>
<a name="l00331"></a>00331     <span class="keyword">typename</span> <a class="code" href="classpion_1_1_plugin_manager.html">pion::PluginManager&lt;PLUGIN_TYPE&gt;::PluginMap::iterator</a> i = <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.upper_bound(resource);
<a name="l00332"></a>00332     <span class="keywordflow">while</span> (i != <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.begin()) {
<a name="l00333"></a>00333         --i;
<a name="l00334"></a>00334         
<a name="l00335"></a>00335         <span class="comment">// keep checking while the first part of the strings match</span>
<a name="l00336"></a>00336         <span class="keywordflow">if</span> (resource.compare(0, i-&gt;first.size(), i-&gt;first) != 0) {
<a name="l00337"></a>00337             <span class="comment">// the first part no longer matches</span>
<a name="l00338"></a>00338             <span class="keywordflow">if</span> (i != <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.begin()) {
<a name="l00339"></a>00339                 <span class="comment">// continue to next plug-in in list if its size is &lt; this one</span>
<a name="l00340"></a>00340                 <span class="keyword">typename</span> <a class="code" href="classpion_1_1_plugin_manager.html">pion::PluginManager&lt;PLUGIN_TYPE&gt;::PluginMap::iterator</a> j=i;
<a name="l00341"></a>00341                 --j;
<a name="l00342"></a>00342                 <span class="keywordflow">if</span> (j-&gt;first.size() &lt; i-&gt;first.size())
<a name="l00343"></a>00343                     <span class="keywordflow">continue</span>;
<a name="l00344"></a>00344             }
<a name="l00345"></a>00345             <span class="comment">// otherwise we've reached the end; stop looking for a match</span>
<a name="l00346"></a>00346             <span class="keywordflow">break</span>;
<a name="l00347"></a>00347         }
<a name="l00348"></a>00348         
<a name="l00349"></a>00349         <span class="comment">// only if the resource matches the plug-in's identifier</span>
<a name="l00350"></a>00350         <span class="comment">// or if resource is followed first with a '/' character</span>
<a name="l00351"></a>00351         <span class="keywordflow">if</span> (resource.size() == i-&gt;first.size() || resource[i-&gt;first.size()]==<span class="charliteral">'/'</span>) {
<a name="l00352"></a>00352             plugin_object_ptr = i-&gt;second.first;
<a name="l00353"></a>00353             <span class="keywordflow">break</span>;
<a name="l00354"></a>00354         }
<a name="l00355"></a>00355     }
<a name="l00356"></a>00356     
<a name="l00357"></a>00357     <span class="keywordflow">return</span> plugin_object_ptr;
<a name="l00358"></a>00358 }
<a name="l00359"></a>00359     
<a name="l00360"></a>00360 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> PLUGIN_TYPE&gt;
<a name="l00361"></a><a class="code" href="classpion_1_1_plugin_manager.html#acd10f940ddd9650d24a91d79a9df929">00361</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpion_1_1_plugin_manager.html">PluginManager&lt;PLUGIN_TYPE&gt;::run</a>(PluginRunFunction run_func)
<a name="l00362"></a>00362 {
<a name="l00363"></a>00363     boost::mutex::scoped_lock plugins_lock(<a class="code" href="classpion_1_1_plugin_manager.html#0958ce38207660bf6fb8dc1124037b93">m_plugin_mutex</a>);
<a name="l00364"></a>00364     <span class="keywordflow">for</span> (<span class="keyword">typename</span> <a class="code" href="classpion_1_1_plugin_manager.html">pion::PluginManager&lt;PLUGIN_TYPE&gt;::PluginMap::iterator</a> i = <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.begin();
<a name="l00365"></a>00365          i != <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.end(); ++i)
<a name="l00366"></a>00366     {
<a name="l00367"></a>00367         run_func(i-&gt;second.first);
<a name="l00368"></a>00368     }
<a name="l00369"></a>00369 }
<a name="l00370"></a>00370 
<a name="l00371"></a>00371 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> PLUGIN_TYPE&gt;
<a name="l00372"></a><a class="code" href="classpion_1_1_plugin_manager.html#0186bc3a0d3e0ef1c536e2b02d41a329">00372</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpion_1_1_plugin_manager.html">PluginManager&lt;PLUGIN_TYPE&gt;::run</a>(<span class="keyword">const</span> std::string&amp; plugin_id,
<a name="l00373"></a>00373                                             PluginRunFunction run_func)
<a name="l00374"></a>00374 {
<a name="l00375"></a>00375     <span class="comment">// no need to lock (handled by PluginManager::get())</span>
<a name="l00376"></a>00376     PLUGIN_TYPE *plugin_object_ptr = <a class="code" href="classpion_1_1_plugin_manager.html#5da2fd956ba48878c32d44f6f62c04fc">get</a>(plugin_id);
<a name="l00377"></a>00377     <span class="keywordflow">if</span> (plugin_object_ptr == NULL)
<a name="l00378"></a>00378         <span class="keywordflow">throw</span> <a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_not_found_exception.html">PluginNotFoundException</a>(plugin_id);
<a name="l00379"></a>00379     run_func(plugin_object_ptr);
<a name="l00380"></a>00380 }
<a name="l00381"></a>00381 
<a name="l00382"></a>00382 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> PLUGIN_TYPE&gt;
<a name="l00383"></a><a class="code" href="classpion_1_1_plugin_manager.html#858c63af532d772270418df0e46b5e46">00383</a> <span class="keyword">inline</span> boost::uint64_t <a class="code" href="classpion_1_1_plugin_manager.html">PluginManager&lt;PLUGIN_TYPE&gt;::getStatistic</a>(PluginStatFunction stat_func)<span class="keyword"> const</span>
<a name="l00384"></a>00384 <span class="keyword"></span>{
<a name="l00385"></a>00385     boost::uint64_t stat_value = 0;
<a name="l00386"></a>00386     boost::mutex::scoped_lock plugins_lock(<a class="code" href="classpion_1_1_plugin_manager.html#0958ce38207660bf6fb8dc1124037b93">m_plugin_mutex</a>);
<a name="l00387"></a>00387     <span class="keywordflow">for</span> (<span class="keyword">typename</span> <a class="code" href="classpion_1_1_plugin_manager.html">pion::PluginManager&lt;PLUGIN_TYPE&gt;::PluginMap::const_iterator</a> i = <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.begin();
<a name="l00388"></a>00388          i != <a class="code" href="classpion_1_1_plugin_manager.html#2b64cffb78aa375ab4f8520ea6395968">m_plugin_map</a>.end(); ++i)
<a name="l00389"></a>00389     {
<a name="l00390"></a>00390         stat_value += stat_func(i-&gt;second.first);
<a name="l00391"></a>00391     }
<a name="l00392"></a>00392     <span class="keywordflow">return</span> stat_value;
<a name="l00393"></a>00393 }
<a name="l00394"></a>00394 
<a name="l00395"></a>00395 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> PLUGIN_TYPE&gt;
<a name="l00396"></a><a class="code" href="classpion_1_1_plugin_manager.html#903a76e4ffc6051f3bd3d473cf26cbde">00396</a> <span class="keyword">inline</span> boost::uint64_t <a class="code" href="classpion_1_1_plugin_manager.html">PluginManager&lt;PLUGIN_TYPE&gt;::getStatistic</a>(<span class="keyword">const</span> std::string&amp; plugin_id,
<a name="l00397"></a>00397                                                                 PluginStatFunction stat_func)<span class="keyword"> const</span>
<a name="l00398"></a>00398 <span class="keyword"></span>{
<a name="l00399"></a>00399     <span class="comment">// no need to lock (handled by PluginManager::get())</span>
<a name="l00400"></a>00400     <span class="keyword">const</span> PLUGIN_TYPE *plugin_object_ptr = const_cast&lt;PluginManager&lt;PLUGIN_TYPE&gt;*&gt;(<span class="keyword">this</span>)-&gt;<a class="code" href="classpion_1_1_plugin_manager.html#5da2fd956ba48878c32d44f6f62c04fc">get</a>(plugin_id);
<a name="l00401"></a>00401     <span class="keywordflow">if</span> (plugin_object_ptr == NULL)
<a name="l00402"></a>00402         <span class="keywordflow">throw</span> <a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_not_found_exception.html">PluginNotFoundException</a>(plugin_id);
<a name="l00403"></a>00403     <span class="keywordflow">return</span> stat_func(plugin_object_ptr);
<a name="l00404"></a>00404 }
<a name="l00405"></a>00405 
<a name="l00406"></a>00406 
<a name="l00407"></a>00407 <span class="comment">// PluginManager::PluginMap member functions</span>
<a name="l00408"></a>00408 
<a name="l00409"></a>00409 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> PLUGIN_TYPE&gt;
<a name="l00410"></a><a class="code" href="classpion_1_1_plugin_manager_1_1_plugin_map.html#670a96cfe235723fecc7e36a1bcbbd46">00410</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpion_1_1_plugin_manager.html">PluginManager&lt;PLUGIN_TYPE&gt;::PluginMap::clear</a>(<span class="keywordtype">void</span>)
<a name="l00411"></a>00411 {
<a name="l00412"></a>00412     <span class="keywordflow">if</span> (! <a class="code" href="classpion_1_1_plugin_manager.html#784cf89f562f850d004b4907ea926d93">empty</a>()) {
<a name="l00413"></a>00413         <span class="keywordflow">for</span> (<span class="keyword">typename</span> <a class="code" href="classpion_1_1_plugin_manager.html">pion::PluginManager&lt;PLUGIN_TYPE&gt;::PluginMap::iterator</a> i =
<a name="l00414"></a>00414              std::map&lt;std::string, std::pair&lt;PLUGIN_TYPE *, <a class="code" href="classpion_1_1_pion_plugin_ptr.html">PionPluginPtr&lt;PLUGIN_TYPE&gt;</a> &gt; &gt;::begin();
<a name="l00415"></a>00415              i != std::map&lt;std::string, std::pair&lt;PLUGIN_TYPE *, PionPluginPtr&lt;PLUGIN_TYPE&gt; &gt; &gt;::end(); ++i)
<a name="l00416"></a>00416         {
<a name="l00417"></a>00417             <span class="keywordflow">if</span> (i-&gt;second.second.is_open()) {
<a name="l00418"></a>00418                 i-&gt;second.second.destroy(i-&gt;second.first);
<a name="l00419"></a>00419             } <span class="keywordflow">else</span> {
<a name="l00420"></a>00420                 <span class="keyword">delete</span> i-&gt;second.first;
<a name="l00421"></a>00421             }
<a name="l00422"></a>00422         }
<a name="l00423"></a>00423         erase(std::map&lt;std::string, std::pair&lt;PLUGIN_TYPE *, <a class="code" href="classpion_1_1_pion_plugin_ptr.html">PionPluginPtr&lt;PLUGIN_TYPE&gt;</a> &gt; &gt;::begin(),
<a name="l00424"></a>00424               std::map&lt;std::string, std::pair&lt;PLUGIN_TYPE *, <a class="code" href="classpion_1_1_pion_plugin_ptr.html">PionPluginPtr&lt;PLUGIN_TYPE&gt;</a> &gt; &gt;::end());
<a name="l00425"></a>00425     }
<a name="l00426"></a>00426 }
<a name="l00427"></a>00427 
<a name="l00428"></a>00428 
<a name="l00429"></a>00429 }   <span class="comment">// end namespace pion</span>
<a name="l00430"></a>00430 
<a name="l00431"></a>00431 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Aug 10 15:23:13 2010 for pion-net by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
