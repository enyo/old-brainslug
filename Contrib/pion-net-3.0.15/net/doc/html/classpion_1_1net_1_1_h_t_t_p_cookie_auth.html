<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>pion-net: pion::net::HTTPCookieAuth Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="namespacepion.html">pion</a>::<a class="el" href="namespacepion_1_1net.html">net</a>::<a class="el" href="classpion_1_1net_1_1_h_t_t_p_cookie_auth.html">HTTPCookieAuth</a></div>
<h1>pion::net::HTTPCookieAuth Class Reference</h1><!-- doxytag: class="pion::net::HTTPCookieAuth" --><!-- doxytag: inherits="pion::net::HTTPAuth" --><code>#include &lt;<a class="el" href="_h_t_t_p_cookie_auth_8hpp-source.html">HTTPCookieAuth.hpp</a>&gt;</code>
<p>
Inherits <a class="el" href="classpion_1_1net_1_1_h_t_t_p_auth.html">pion::net::HTTPAuth</a>.
<p>
<a href="classpion_1_1net_1_1_h_t_t_p_cookie_auth-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
<a class="el" href="classpion_1_1net_1_1_h_t_t_p_cookie_auth.html">HTTPCookieAuth</a>: handles HTTP authentication and session management in accordance with RFC 2617 (<a href="http://tools.ietf.org/html/rfc2617">http://tools.ietf.org/html/rfc2617</a> ) using cookies. 
<p>

<p>
Definition at line <a class="el" href="_h_t_t_p_cookie_auth_8hpp-source.html#l00028">28</a> of file <a class="el" href="_h_t_t_p_cookie_auth_8hpp-source.html">HTTPCookieAuth.hpp</a>.<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpion_1_1net_1_1_h_t_t_p_cookie_auth.html#20cdc867b1780399155c4e102f13f3d1">HTTPCookieAuth</a> (<a class="el" href="namespacepion_1_1net.html#41439dd0d2404c0202b0f14dc39f120f">PionUserManagerPtr</a> userManager, const std::string &amp;login=&quot;/login&quot;, const std::string &amp;logout=&quot;/logout&quot;, const std::string &amp;redirect=&quot;&quot;)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="bbb463ec773cf4442bd66e20639ec9f8"></a><!-- doxytag: member="pion::net::HTTPCookieAuth::~HTTPCookieAuth" ref="bbb463ec773cf4442bd66e20639ec9f8" args="()" -->
virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpion_1_1net_1_1_h_t_t_p_cookie_auth.html#bbb463ec773cf4442bd66e20639ec9f8">~HTTPCookieAuth</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">virtual destructor <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpion_1_1net_1_1_h_t_t_p_cookie_auth.html#cdeb81641620b766546b548a43611a22">handleRequest</a> (<a class="el" href="namespacepion_1_1net.html#5d6280ef9c5b2df13630ae1c1dea66d8">HTTPRequestPtr</a> &amp;request, <a class="el" href="namespacepion_1_1net.html#e66ec40cd9d138619b1142311e8fee59">TCPConnectionPtr</a> &amp;tcp_conn)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpion_1_1net_1_1_h_t_t_p_cookie_auth.html#8b980a850b6ccbac7f0adedb01d66ca3">setOption</a> (const std::string &amp;name, const std::string &amp;value)</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpion_1_1net_1_1_h_t_t_p_cookie_auth.html#aba91308018798e2c6e3cfaa3647f8a6">processLogin</a> (<a class="el" href="namespacepion_1_1net.html#5d6280ef9c5b2df13630ae1c1dea66d8">HTTPRequestPtr</a> &amp;http_request, <a class="el" href="namespacepion_1_1net.html#e66ec40cd9d138619b1142311e8fee59">TCPConnectionPtr</a> &amp;tcp_conn)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpion_1_1net_1_1_h_t_t_p_cookie_auth.html#5e0fd6081ba3171dbbefccf741ef3f7c">handleUnauthorized</a> (<a class="el" href="namespacepion_1_1net.html#5d6280ef9c5b2df13630ae1c1dea66d8">HTTPRequestPtr</a> &amp;http_request, <a class="el" href="namespacepion_1_1net.html#e66ec40cd9d138619b1142311e8fee59">TCPConnectionPtr</a> &amp;tcp_conn)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpion_1_1net_1_1_h_t_t_p_cookie_auth.html#779d644d132e13e9cb58348a7981454c">handleRedirection</a> (<a class="el" href="namespacepion_1_1net.html#5d6280ef9c5b2df13630ae1c1dea66d8">HTTPRequestPtr</a> &amp;http_request, <a class="el" href="namespacepion_1_1net.html#e66ec40cd9d138619b1142311e8fee59">TCPConnectionPtr</a> &amp;tcp_conn, const std::string &amp;redirection_url, const std::string &amp;new_cookie=&quot;&quot;, bool delete_cookie=false)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpion_1_1net_1_1_h_t_t_p_cookie_auth.html#c3d27f929aea67d79b1b91c4c0905a70">handleOk</a> (<a class="el" href="namespacepion_1_1net.html#5d6280ef9c5b2df13630ae1c1dea66d8">HTTPRequestPtr</a> &amp;http_request, <a class="el" href="namespacepion_1_1net.html#e66ec40cd9d138619b1142311e8fee59">TCPConnectionPtr</a> &amp;tcp_conn, const std::string &amp;new_cookie=&quot;&quot;, bool delete_cookie=false)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpion_1_1net_1_1_h_t_t_p_cookie_auth.html#559ddbba1f83d377e0b59b11bb55aa2b">expireCache</a> (const <a class="el" href="namespacepion.html#968531d4adcf6f642fc16dc5bf11fa19">PionDateTime</a> &amp;time_now)</td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="20cdc867b1780399155c4e102f13f3d1"></a><!-- doxytag: member="pion::net::HTTPCookieAuth::HTTPCookieAuth" ref="20cdc867b1780399155c4e102f13f3d1" args="(PionUserManagerPtr userManager, const std::string &amp;login=&quot;/login&quot;, const std::string &amp;logout=&quot;/logout&quot;, const std::string &amp;redirect=&quot;&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pion::net::HTTPCookieAuth::HTTPCookieAuth           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacepion_1_1net.html#41439dd0d2404c0202b0f14dc39f120f">PionUserManagerPtr</a>&nbsp;</td>
          <td class="paramname"> <em>userManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>login</em> = <code>&quot;/login&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>logout</em> = <code>&quot;/logout&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>redirect</em> = <code>&quot;&quot;</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
default constructor<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>userManager</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>login</em>&nbsp;</td><td>- URL resource for login request. Typical login request has format: <a href="http://website/login?user=">http://website/login?user=</a>"username"&amp;pass="password"&amp;url="redirection_url" </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>logout</em>&nbsp;</td><td>- URL resource for logout request. Typical logout request has format: <a href="http://website/logout?url=">http://website/logout?url=</a>"redirection_url" </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>redirect</em>&nbsp;</td><td>- if not empty, URL for redirection in case of authentication failure if empty - send code 401 on authentication failure </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00030">30</a> of file <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html">HTTPCookieAuth.cpp</a>.
<p>
References <a class="el" href="_h_t_t_p_auth_8hpp-source.html#l00150">pion::net::HTTPAuth::setLogger()</a>.
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="559ddbba1f83d377e0b59b11bb55aa2b"></a><!-- doxytag: member="pion::net::HTTPCookieAuth::expireCache" ref="559ddbba1f83d377e0b59b11bb55aa2b" args="(const PionDateTime &amp;time_now)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pion::net::HTTPCookieAuth::expireCache           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacepion.html#968531d4adcf6f642fc16dc5bf11fa19">PionDateTime</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>time_now</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Cache expiration cleanup. (Call it periodically) 
<p>
Definition at line <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00260">260</a> of file <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html">HTTPCookieAuth.cpp</a>.
<p>
Referenced by <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00052">handleRequest()</a>.
</div>
</div><p>
<a class="anchor" name="c3d27f929aea67d79b1b91c4c0905a70"></a><!-- doxytag: member="pion::net::HTTPCookieAuth::handleOk" ref="c3d27f929aea67d79b1b91c4c0905a70" args="(HTTPRequestPtr &amp;http_request, TCPConnectionPtr &amp;tcp_conn, const std::string &amp;new_cookie=&quot;&quot;, bool delete_cookie=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pion::net::HTTPCookieAuth::handleOk           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacepion_1_1net.html#5d6280ef9c5b2df13630ae1c1dea66d8">HTTPRequestPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>http_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacepion_1_1net.html#e66ec40cd9d138619b1142311e8fee59">TCPConnectionPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>tcp_conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>new_cookie</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>delete_cookie</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
used to send OK responses with new cookie<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>http_request</em>&nbsp;</td><td>the new HTTP request to handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tcp_conn</em>&nbsp;</td><td>the TCP connection that has the new request </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00236">236</a> of file <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html">HTTPCookieAuth.cpp</a>.
<p>
References <a class="el" href="_h_t_t_p_response_writer_8hpp-source.html#l00049">pion::net::HTTPResponseWriter::create()</a>, <a class="el" href="_t_c_p_connection_8hpp-source.html#l00605">pion::net::TCPConnection::finish()</a>, <a class="el" href="_h_t_t_p_types_8hpp-source.html#l00085">pion::net::HTTPTypes::RESPONSE_CODE_NO_CONTENT</a>, and <a class="el" href="_h_t_t_p_types_8hpp-source.html#l00070">pion::net::HTTPTypes::RESPONSE_MESSAGE_NO_CONTENT</a>.
<p>
Referenced by <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00104">processLogin()</a>.
</div>
</div><p>
<a class="anchor" name="779d644d132e13e9cb58348a7981454c"></a><!-- doxytag: member="pion::net::HTTPCookieAuth::handleRedirection" ref="779d644d132e13e9cb58348a7981454c" args="(HTTPRequestPtr &amp;http_request, TCPConnectionPtr &amp;tcp_conn, const std::string &amp;redirection_url, const std::string &amp;new_cookie=&quot;&quot;, bool delete_cookie=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pion::net::HTTPCookieAuth::handleRedirection           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacepion_1_1net.html#5d6280ef9c5b2df13630ae1c1dea66d8">HTTPRequestPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>http_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacepion_1_1net.html#e66ec40cd9d138619b1142311e8fee59">TCPConnectionPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>tcp_conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>redirection_url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>new_cookie</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>delete_cookie</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
used to send redirection responses<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>http_request</em>&nbsp;</td><td>the new HTTP request to handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tcp_conn</em>&nbsp;</td><td>the TCP connection that has the new request </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00198">198</a> of file <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html">HTTPCookieAuth.cpp</a>.
<p>
References <a class="el" href="_h_t_t_p_response_writer_8hpp-source.html#l00049">pion::net::HTTPResponseWriter::create()</a>, <a class="el" href="_t_c_p_connection_8hpp-source.html#l00605">pion::net::TCPConnection::finish()</a>, <a class="el" href="_h_t_t_p_types_8hpp-source.html#l00047">pion::net::HTTPTypes::HEADER_LOCATION</a>, <a class="el" href="_h_t_t_p_types_8hpp-source.html#l00086">pion::net::HTTPTypes::RESPONSE_CODE_FOUND</a>, and <a class="el" href="_h_t_t_p_types_8hpp-source.html#l00071">pion::net::HTTPTypes::RESPONSE_MESSAGE_FOUND</a>.
<p>
Referenced by <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00170">handleUnauthorized()</a>, and <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00104">processLogin()</a>.
</div>
</div><p>
<a class="anchor" name="cdeb81641620b766546b548a43611a22"></a><!-- doxytag: member="pion::net::HTTPCookieAuth::handleRequest" ref="cdeb81641620b766546b548a43611a22" args="(HTTPRequestPtr &amp;request, TCPConnectionPtr &amp;tcp_conn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool pion::net::HTTPCookieAuth::handleRequest           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacepion_1_1net.html#5d6280ef9c5b2df13630ae1c1dea66d8">HTTPRequestPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacepion_1_1net.html#e66ec40cd9d138619b1142311e8fee59">TCPConnectionPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>tcp_conn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
attempts to validate authentication of a new HTTP request. If request valid, pointer to user identity object (if any) will be preserved in the request and return "true". If request not authenticated, appropriate response is sent over tcp_conn and return "false";<p>
Note: if request matches "login" resource, then login sequences attempted. If "name" and "pass" attributes match user definition, a random cookie is created and associated with given user session. If request contains "url" attribute, then page redirection response returned. Otherwise - empty 204 response.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>request</em>&nbsp;</td><td>the new HTTP request to handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tcp_conn</em>&nbsp;</td><td>the TCP connection that has the new request</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if request valid and user identity inserted into request </dd></dl>

<p>
Implements <a class="el" href="classpion_1_1net_1_1_h_t_t_p_auth.html#3f3e04dfd53fcdea33abcc28d9accfa0">pion::net::HTTPAuth</a>.
<p>
Definition at line <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00052">52</a> of file <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html">HTTPCookieAuth.cpp</a>.
<p>
References <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00260">expireCache()</a>, <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00170">handleUnauthorized()</a>, <a class="el" href="_h_t_t_p_auth_8cpp-source.html#l00037">pion::net::HTTPAuth::needAuthentication()</a>, and <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00104">processLogin()</a>.
</div>
</div><p>
<a class="anchor" name="5e0fd6081ba3171dbbefccf741ef3f7c"></a><!-- doxytag: member="pion::net::HTTPCookieAuth::handleUnauthorized" ref="5e0fd6081ba3171dbbefccf741ef3f7c" args="(HTTPRequestPtr &amp;http_request, TCPConnectionPtr &amp;tcp_conn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pion::net::HTTPCookieAuth::handleUnauthorized           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacepion_1_1net.html#5d6280ef9c5b2df13630ae1c1dea66d8">HTTPRequestPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>http_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacepion_1_1net.html#e66ec40cd9d138619b1142311e8fee59">TCPConnectionPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>tcp_conn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
used to send responses when access to resource is not authorized<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>http_request</em>&nbsp;</td><td>the new HTTP request to handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tcp_conn</em>&nbsp;</td><td>the TCP connection that has the new request </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00170">170</a> of file <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html">HTTPCookieAuth.cpp</a>.
<p>
References <a class="el" href="_h_t_t_p_response_writer_8hpp-source.html#l00049">pion::net::HTTPResponseWriter::create()</a>, <a class="el" href="_t_c_p_connection_8hpp-source.html#l00605">pion::net::TCPConnection::finish()</a>, <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00198">handleRedirection()</a>, <a class="el" href="_h_t_t_p_types_8hpp-source.html#l00087">pion::net::HTTPTypes::RESPONSE_CODE_UNAUTHORIZED</a>, and <a class="el" href="_h_t_t_p_types_8hpp-source.html#l00072">pion::net::HTTPTypes::RESPONSE_MESSAGE_UNAUTHORIZED</a>.
<p>
Referenced by <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00052">handleRequest()</a>, and <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00104">processLogin()</a>.
</div>
</div><p>
<a class="anchor" name="aba91308018798e2c6e3cfaa3647f8a6"></a><!-- doxytag: member="pion::net::HTTPCookieAuth::processLogin" ref="aba91308018798e2c6e3cfaa3647f8a6" args="(HTTPRequestPtr &amp;http_request, TCPConnectionPtr &amp;tcp_conn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool pion::net::HTTPCookieAuth::processLogin           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacepion_1_1net.html#5d6280ef9c5b2df13630ae1c1dea66d8">HTTPRequestPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>http_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacepion_1_1net.html#e66ec40cd9d138619b1142311e8fee59">TCPConnectionPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>tcp_conn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
check if given request is a login/logout and process it<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>http_request</em>&nbsp;</td><td>the new HTTP request to handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tcp_conn</em>&nbsp;</td><td>the TCP connection that has the new request</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if it was a login/logout request and no future processing required. </dd></dl>

<p>
Definition at line <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00104">104</a> of file <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html">HTTPCookieAuth.cpp</a>.
<p>
References <a class="el" href="_h_t_t_p_types_8cpp-source.html#l00172">pion::net::HTTPTypes::base64_encode()</a>, <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00236">handleOk()</a>, <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00198">handleRedirection()</a>, <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00170">handleUnauthorized()</a>, <a class="el" href="_h_t_t_p_auth_8hpp-source.html#l00157">pion::net::HTTPAuth::m_user_manager</a>, <a class="el" href="_h_t_t_p_server_8hpp-source.html#l00159">pion::net::HTTPServer::stripTrailingSlash()</a>, and <a class="el" href="_h_t_t_p_types_8cpp-source.html#l00221">pion::net::HTTPTypes::url_decode()</a>.
<p>
Referenced by <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00052">handleRequest()</a>.
</div>
</div><p>
<a class="anchor" name="8b980a850b6ccbac7f0adedb01d66ca3"></a><!-- doxytag: member="pion::net::HTTPCookieAuth::setOption" ref="8b980a850b6ccbac7f0adedb01d66ca3" args="(const std::string &amp;name, const std::string &amp;value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pion::net::HTTPCookieAuth::setOption           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
sets a configuration option Valid options:<ul>
<li>"login" - URL resource for login request. Typical login request has format: <a href="http://website/login?user=">http://website/login?user=</a>"username"&amp;pass="password"&amp;url="redirection_url"</li><li>"logout" - URL resource for logout request. Typical logout request has format: <a href="http://website/logout?url=">http://website/logout?url=</a>"redirection_url"<ul>
<li>"redirect" - if not empty, URL for redirection in case of authentication failure if empty - send code 401 on authentication failure</li></ul>
</li></ul>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>the name of the option to change </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>value</em>&nbsp;</td><td>the value of the option </td></tr>
  </table>
</dl>

<p>
Reimplemented from <a class="el" href="classpion_1_1net_1_1_h_t_t_p_auth.html#26327876fd6c6235de8e7810451a2ebd">pion::net::HTTPAuth</a>.
<p>
Definition at line <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html#l00092">92</a> of file <a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html">HTTPCookieAuth.cpp</a>.
</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>net/include/pion/net/<a class="el" href="_h_t_t_p_cookie_auth_8hpp-source.html">HTTPCookieAuth.hpp</a><li>net/src/<a class="el" href="_h_t_t_p_cookie_auth_8cpp-source.html">HTTPCookieAuth.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Tue Aug 10 15:23:13 2010 for pion-net by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
